<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>HTTP Response · Bow Framework</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="- [Introduction](#introduction)"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="HTTP Response · Bow Framework"/><meta property="og:type" content="website"/><meta property="og:url" content="https://bowphp.github.io/index.html"/><meta property="og:description" content="- [Introduction](#introduction)"/><meta property="og:image" content="https://bowphp.github.io/img/bow.jpg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://bowphp.github.io/img/bow.jpg"/><link rel="shortcut icon" href="/img/bow.jpg"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://bowphp.github.io/blog/atom.xml" title="Bow Framework Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://bowphp.github.io/blog/feed.xml" title="Bow Framework Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-127753823-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-127753823-1"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/script.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/bow.jpg" alt="Bow Framework"/><h2 class="headerTitleWithLogo">Bow Framework</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/installation" target="_self">DOCUMENTATION</a></li><li class=""><a href="https://bowphp.github.io/api/master" target="_self">API</a></li><li class=""><a href="/users" target="_self">UTILISATEUR</a></li><li class=""><a href="/blog/" target="_self">BLOG</a></li><li class=""><a href="https://github.com/bowphp" target="_self">GITHUB</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Http</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Démarrage</h3><ul><li class="navListItem"><a class="navItem" href="/docs/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/structure">Structure</a></li><li class="navListItem"><a class="navItem" href="/docs/contribution">Guide de Contribution</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Guide</h3><ul><li class="navListItem"><a class="navItem" href="/docs/routing">Routing</a></li><li class="navListItem"><a class="navItem" href="/docs/controleur">Contrôleurs</a></li><li class="navListItem"><a class="navItem" href="/docs/middleware">Middleware</a></li><li class="navListItem"><a class="navItem" href="/docs/views">Vues</a></li><li class="navListItem"><a class="navItem" href="/docs/storage">Storage</a></li><li class="navListItem"><a class="navItem" href="/docs/mail">Mail</a></li><li class="navListItem"><a class="navItem" href="/docs/i18n">i18n</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Base de donnée</h3><ul><li class="navListItem"><a class="navItem" href="/docs/database">Démarrage</a></li><li class="navListItem"><a class="navItem" href="/docs/query-build">SQL Builder</a></li><li class="navListItem"><a class="navItem" href="/docs/orm">Barry ORM</a></li><li class="navListItem"><a class="navItem" href="/docs/migration">Migration</a></li><li class="navListItem"><a class="navItem" href="/docs/seeding">Seeding</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Http</h3><ul><li class="navListItem"><a class="navItem" href="/docs/http-request">HTTP Request</a></li><li class="navListItem"><a class="navItem" href="/docs/csrf-protection">CSRF Protection</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/http-response">HTTP Response</a></li><li class="navListItem"><a class="navItem" href="/docs/http-session">HTTP Session</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Misc</h3><ul><li class="navListItem"><a class="navItem" href="/docs/package">Package</a></li><li class="navListItem"><a class="navItem" href="/docs/frontend">Frontend</a></li><li class="navListItem"><a class="navItem" href="/docs/tintin">Tintin Template</a></li><li class="navListItem"><a class="navItem" href="/docs/policier">Policier</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docMainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/bowphp/docs/edit/3.0/docs/responses.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">HTTP Response</h1></header><article><div><span><ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#envoye-un-response">Envoyé un résponse</a>
<ul>
<li><a href="#une-chaine-de-caractère">Une chaine de caractère</a></li>
<li><a href="#une-collection-et-une-tableau-ou-un-object">Une Collection et Une tableau ou un Object</a></li>
<li><a href="un-model-de-barry-orm">Un Model de Barry ORM</a></li>
</ul></li>
<li><a href="#modification-de-reponse">Modification de réponse</a>
<ul>
<li><a href="#modification-du-code-d-erreur">Modification du code d'erreur</a></li>
<li><a href="#ajouter-une-entête-http">Ajouter une entête http</a></li>
</ul></li>
<li><a href="#envoyer-un-json">Envoyer un json</a>
<ul>
<li><a href="#protototype-de-la-methode-json">Protototype de la méthode json</a></li>
<li><a href="#exemple-d-envoye-de-json">Exemple d'envoye de JSON</a></li>
</ul></li>
<li><a href="#envoyer-une-reponse-depuis-les-vues">Envoyer une reponse depuis les vues</a>
<ul>
<li><a href="#protototype-de-la-methode-render">Protototype de la méthode render</a></li>
<li><a href="#exemple-d-envoye-de-vue">Exemple d'envoye de vue</a></li>
</ul></li>
<li><a href="#redirection">Redirection</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="introduction"></a><a href="#introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>
<p>Tous les routes et contrôleurs doivent retourner une réponse à renvoyer à l'utilisateur. Bow fournit plusieurs façons différentes de renvoyer des réponses. La réponse la plus élémentaire est le retour d'une chaîne depuis une route ou un contrôleur. Bow convertira automatiquement la chaîne en une réponse HTTP complète.</p>
<h2><a class="anchor" aria-hidden="true" id="envoye-une-reponse"></a><a href="#envoye-une-reponse" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Envoyé une réponse</h2>
<h3><a class="anchor" aria-hidden="true" id="une-chaine-de-caractere"></a><a href="#une-chaine-de-caractere" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Une chaine de caractère</h3>
<p>Une réponse HTTP peut être une chaine de caractère.</p>
<pre><code class="hljs css language-php">$app-&gt;get(<span class="hljs-string">'/'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> 
</span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, world"</span>;
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="une-collection-et-un-tableau-ou-un-object"></a><a href="#une-collection-et-un-tableau-ou-un-object" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Une Collection et Un tableau ou un Object</h3>
<p>Une réponse HTTP peut être une instance de <a href="https://bowphp.github.io/api/master/Bow/Support/Collection.html"><code>Bow\Support\Collection</code></a>.</p>
<pre><code class="hljs css language-php">$app-&gt;get(<span class="hljs-string">'/array'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> 
</span>{
  <span class="hljs-keyword">return</span> [<span class="hljs-number">10</span>, <span class="hljs-number">2</span>, <span class="hljs-number">12</span>, <span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'Dakia'</span>];
});

$app-&gt;get(<span class="hljs-string">'/collection'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
</span>{
  <span class="hljs-keyword">return</span> collect([<span class="hljs-number">10</span>, <span class="hljs-number">2</span>, <span class="hljs-number">12</span>]);
});

$app-&gt;get(<span class="hljs-string">'/object'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
</span>{
  <span class="hljs-keyword">return</span> (object) [<span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'Dakia'</span>];
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="un-modele-barry"></a><a href="#un-modele-barry" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Un modèle Barry</h3>
<p>La réponse HTTP peut être un <code>Model</code> ou une <code>Collection</code> de modèle, Bow la convertis directement en <code>JSON</code>.</p>
<pre><code class="hljs css language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">User</span>;

$app-&gt;get(<span class="hljs-string">'/'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
</span>{
  $model = User::where(<span class="hljs-string">'id'</span>, <span class="hljs-number">1</span>)-&gt;first();
  
  <span class="hljs-keyword">return</span> $model;
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="modification-de-reponse"></a><a href="#modification-de-reponse" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Modification de réponse</h2>
<h3><a class="anchor" aria-hidden="true" id="modification-du-code-d-erreur"></a><a href="#modification-du-code-d-erreur" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Modification du code d'erreur</h3>
<p>Il est très important d'ajouter les codes d'erreurs à votre réponse HTTP si vous développez un API RESTFUL. La méthode <code>status</code> vous permet de le faire.</p>
<pre><code class="hljs css language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">User</span>;

$app-&gt;get(<span class="hljs-string">'/'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
</span>{
  $response = response();
  
  <span class="hljs-keyword">return</span> $response-&gt;status(<span class="hljs-number">400</span>);
});
</code></pre>
<p>Pour plus d'information sur les code HTTP. Consultez ce <a href="https://fr.wikipedia.org/wiki/Liste_des_codes_HTTP">lien</a>.</p>
<p>Si dans votre API, la requête a été traitée avec succès et que vous n'avez pas d’information à renvoyer. Il est préférable de lui retourne un <code>204</code> qu'un <code>200</code> :tada:.</p>
<h3><a class="anchor" aria-hidden="true" id="ajouter-une-entete-http"></a><a href="#ajouter-une-entete-http" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ajouter une entête HTTP</h3>
<p>Souvent vous serez amener à ajouter d'autre entête HTTP à votre réponse HTTP. La méthode <code>addHeader</code> et <code>withHeaders</code> vous permet de le faire.</p>
<pre><code class="hljs css language-php">$response-&gt;addHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'application/json'</span>);
</code></pre>
<p>Nous pouvez ajouter plusieur entête en même temps:</p>
<pre><code class="hljs css language-php">$response-&gt;withHeaders([
  <span class="hljs-string">'Content-Type'</span> =&gt; <span class="hljs-string">'application/json'</span>,
  <span class="hljs-string">'X-Proto-Value'</span> =&gt; <span class="hljs-number">1</span>
]);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="envoyer-un-json"></a><a href="#envoyer-un-json" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Envoyer un JSON</h2>
<p>Dans les applications REST (Api REST/RESTFUL) les informations sont généralement retournés en JSON. Pour envoyer un information JSON au client, vous pouvez utiliser le help <code>json</code> ou la méthode <code>json</code> sur l'instance de <code>Bow\Http\Response</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="protototype-de-la-methode-json"></a><a href="#protototype-de-la-methode-json" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Protototype de la méthode <code>json</code></h3>
<pre><code class="hljs css language-php">$response-&gt;json($data, $code, $headers);
</code></pre>
<table>
<thead>
<tr><th>paramêtre</th><th>Type</th></tr>
</thead>
<tbody>
<tr><td>$data</td><td><code>Array</code>, <code>stdClass</code>, <code>Iterable</code>, <code>JsonSerializable</code> - Les données à sérialiser</td></tr>
<tr><td>$code</td><td><code>Int</code> - Le code du status HTTP</td></tr>
<tr><td>$headers</td><td><code>Array</code> - Les entêtes à ajouter sur le réponse</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="exemple-d-envoye-de-json"></a><a href="#exemple-d-envoye-de-json" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple d'envoye de JSON</h3>
<p>Exemple:</p>
<pre><code class="hljs css language-php">$data = [<span class="hljs-string">'message'</span> =&gt; <span class="hljs-string">'Hello, World'</span>];

<span class="hljs-keyword">return</span> $response-&gt;json($data, $code = <span class="hljs-number">200</span>, [
  <span class="hljs-string">'X-Proto-Value'</span> =&gt; <span class="hljs-number">1</span> <span class="hljs-comment">// Juste un test</span>
]);
</code></pre>
<p>Avec le HELPER:</p>
<pre><code class="hljs css language-php">$data = [<span class="hljs-string">'message'</span> =&gt; <span class="hljs-string">'Hello, World'</span>];

<span class="hljs-keyword">return</span> json($data, <span class="hljs-number">200</span>, [
  <span class="hljs-string">'X-Proto-Value'</span> =&gt; <span class="hljs-number">1</span> <span class="hljs-comment">// Juste un test</span>
]);
</code></pre>
<p>Ici, Bow ajout directement l'entête HTTP <code>Content-Type</code> à <code>application/json</code>, donc plus besoin de l'ajouter manuellement dans le <code>$headers</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="envoyer-une-reponse-depuis-les-vues"></a><a href="#envoyer-une-reponse-depuis-les-vues" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Envoyer une réponse depuis les vues</h2>
<p>Souvent vous pouvez utiliser un instance de <code>Bow\Http\Response</code> pour faire le rendu de <a href="./views">vue</a> via la méthode <code>render</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="protototype-de-la-methode-render"></a><a href="#protototype-de-la-methode-render" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Protototype de la méthode <code>render</code></h3>
<pre><code class="hljs css language-php">$response-&gt;render($name, $data, $code, $headers);
</code></pre>
<table>
<thead>
<tr><th>paramêtre</th><th>Type</th></tr>
</thead>
<tbody>
<tr><td>$name</td><td><code>String</code> - Le nom d'une vue à rendre</td></tr>
<tr><td>$data</td><td><code>Array</code> - Les données à envoyer à la vue</td></tr>
<tr><td>$code</td><td><code>Int</code> - Le code du status HTTP</td></tr>
<tr><td>$headers</td><td><code>Array</code> - Les entêtes à ajouter à la réponse</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="exemple-d-envoye-de-vue"></a><a href="#exemple-d-envoye-de-vue" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple d'envoye de vue</h3>
<p>Exemple:</p>
<pre><code class="hljs css language-php">$users = User::where(<span class="hljs-string">'id'</span>, <span class="hljs-string">'!='</span>, <span class="hljs-number">2</span>)-&gt;get();

<span class="hljs-keyword">return</span> $response-&gt;render(<span class="hljs-string">'users'</span>, [<span class="hljs-string">'users'</span> =&gt; $users], <span class="hljs-number">200</span>, [
  <span class="hljs-string">'X-Proto-Value'</span> =&gt; <span class="hljs-number">1</span> <span class="hljs-comment">// Juste un test</span>
]);
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="telecharger-un-fichier"></a><a href="#telecharger-un-fichier" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Télécharger un fichier</h3>
<p>Souvent vous serez amener à mettre en place des systèmes de téléchargement de fichier zip ou image, encore vous allez faire des applications où il faut s'authentifier avant de télécharge des fichiers du type dropbox. Bow offre un API simple via la classe <a href="https://bowphp.github.io/api/master/Bow/Http/Response.html"><code>Bow\Http\Response</code></a> pour télécharger un fichier avec la méthode <code>download</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="protototype-de-la-methode-download"></a><a href="#protototype-de-la-methode-download" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Protototype de la méthode <code>download</code></h3>
<pre><code class="hljs css language-php">$response-&gt;download($file, $filename = <span class="hljs-keyword">null</span>, $headers, $disposition = <span class="hljs-string">'attachment'</span>);
</code></pre>
<table>
<thead>
<tr><th>paramêtre</th><th>Type</th></tr>
</thead>
<tbody>
<tr><td>$file</td><td><code>String</code> - Le chemin absolu du fichier</td></tr>
<tr><td>$filename</td><td><code>String</code> - Le nouveau du fichier par defaut est <code>null</code></td></tr>
<tr><td>$headers</td><td><code>Array</code> - Les entêtes à ajouter à la réponse</td></tr>
<tr><td>$disposition</td><td><code>String</code> - Indiquant si le contenu devrait être affiché en ligne dans le navigateur, c'est-à-dire en tant que page Web, ou en pièce jointe téléchargé et enregistré localement.</td></tr>
</tbody>
</table>
<p>Plus d'information sur l'entête <a href="https://developer.mozilla.org/fr/docs/Web/HTTP/Headers/Content-Disposition"><code>Content-Disposition</code></a>.</p>
<h3><a class="anchor" aria-hidden="true" id="exemple-de-telecharge"></a><a href="#exemple-de-telecharge" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exemple de télécharge</h3>
<p>Exemple:</p>
<pre><code class="hljs css language-php">$file = <span class="hljs-string">'/path/to/file.png'</span>;

<span class="hljs-keyword">return</span> $response-&gt;download($file, <span class="hljs-string">'image.png'</span>);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="redirection"></a><a href="#redirection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Redirection</h2>
<p>Vous serez certainement amener à faire des redirections vers d'autres ressources et cela en réalité constitue une réponse HTTP. Les méthodes <code>to</code> et <code>back</code> (qui comme son nom l'indique permet de faire une revenir sur en arrière) de la classe <a href="https://bowphp.github.io/api/master/Bow/Http/Redirect.html"><code>Bow\Http\Redirect</code></a>.</p>
<h3><a class="anchor" aria-hidden="true" id="redirection-avec-to"></a><a href="#redirection-avec-to" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Redirection avec <code>to</code></h3>
<p>La redirection avec <code>to</code> permet de renvoyer l'utilisateur sur une autre la page.</p>
<pre><code class="hljs css language-php"><span class="hljs-keyword">return</span> redirect()-&gt;to($path);
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="prototype-de-to"></a><a href="#prototype-de-to" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prototype de <code>to</code></h4>
<table>
<thead>
<tr><th>paramêtre</th><th>Type</th></tr>
</thead>
<tbody>
<tr><td>$path</td><td><code>String</code> - L'URL de rédirection</td></tr>
</tbody>
</table>
<pre><code class="hljs css language-php"><span class="hljs-keyword">return</span> redirect()-&gt;to(<span class="hljs-string">'/users'</span>);
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="redirection-avec-back"></a><a href="#redirection-avec-back" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Redirection avec <code>back</code></h3>
<p>La redirection avec <code>back</code> permet de renvoyer l'utilisateur sur la page précédente.</p>
<pre><code class="hljs css language-php"><span class="hljs-keyword">return</span> redirect()-&gt;back($status_code);
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="prototype-de-back"></a><a href="#prototype-de-back" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prototype de <code>back</code></h4>
<table>
<thead>
<tr><th>paramêtre</th><th>Type</th></tr>
</thead>
<tbody>
<tr><td>$status_code</td><td><code>Int</code> - Le code HTTP de la réponse par defaut est égale à <code>302</code></td></tr>
</tbody>
</table>
<pre><code class="hljs css language-php"><span class="hljs-keyword">return</span> redirect()-&gt;back();
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="redirection-avec-des-informations"></a><a href="#redirection-avec-des-informations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Redirection avec des informations</h3>
<p>Vous pouvez aussi faire la redirection avec les informations envoyés par l'utilisateur et ceci avec la méthode <code>withInput</code> comme ceci:</p>
<pre><code class="hljs css language-php"> <span class="hljs-keyword">return</span> redirect()-&gt;back()-&gt;withInput();
 <span class="hljs-comment">// Ou</span>
 <span class="hljs-keyword">return</span> redirect()-&gt;to(<span class="hljs-string">"/home"</span>)-&gt;withInput();
</code></pre>
<p>Notez que vous pouvez donner une tableau de valeur à <code>withInput</code> qui sera une collection d'information à envoyer à utilisateur.</p>
<blockquote>
<p>N'hésitez pas à donner votre avis sur la qualité de la documentation ou proposez des correctifs.</p>
</blockquote>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/csrf-protection"><span class="arrow-prev">← </span><span>Previous</span></a><a class="docs-next button" href="/docs/http-session"><span>Next</span><span class="arrow-next"> →</span></a></div><p style="font-size:12px;text-align:right"><strong>Last updated: </strong>2018-12-25 14:40:03</p></div></div><nav class="onPageNav docOnPageNav"><ul class="toc-headings"><li><a href="#introduction">Introduction</a></li><li><a href="#envoye-une-reponse">Envoyé une réponse</a><ul class="toc-headings"><li><a href="#une-chaine-de-caractere">Une chaine de caractère</a></li><li><a href="#une-collection-et-un-tableau-ou-un-object">Une Collection et Un tableau ou un Object</a></li><li><a href="#un-modele-barry">Un modèle Barry</a></li></ul></li><li><a href="#modification-de-reponse">Modification de réponse</a><ul class="toc-headings"><li><a href="#modification-du-code-d-erreur">Modification du code d'erreur</a></li><li><a href="#ajouter-une-entete-http">Ajouter une entête HTTP</a></li></ul></li><li><a href="#envoyer-un-json">Envoyer un JSON</a><ul class="toc-headings"><li><a href="#protototype-de-la-methode-json">Protototype de la méthode <code>json</code></a></li><li><a href="#exemple-d-envoye-de-json">Exemple d'envoye de JSON</a></li></ul></li><li><a href="#envoyer-une-reponse-depuis-les-vues">Envoyer une réponse depuis les vues</a><ul class="toc-headings"><li><a href="#protototype-de-la-methode-render">Protototype de la méthode <code>render</code></a></li><li><a href="#exemple-d-envoye-de-vue">Exemple d'envoye de vue</a></li><li><a href="#telecharger-un-fichier">Télécharger un fichier</a></li><li><a href="#protototype-de-la-methode-download">Protototype de la méthode <code>download</code></a></li><li><a href="#exemple-de-telecharge">Exemple de télécharge</a></li></ul></li><li><a href="#redirection">Redirection</a><ul class="toc-headings"><li><a href="#redirection-avec-to">Redirection avec <code>to</code></a></li><li><a href="#redirection-avec-back">Redirection avec <code>back</code></a></li><li><a href="#redirection-avec-des-informations">Redirection avec des informations</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/bow.jpg" alt="Bow Framework" width="66" height="58"/></a><div><h5>Documentation</h5><a href="/docs/en/installation.html">Commencer</a><a href="/docs/en/contribution.html">Voulez-vous contribuer ?</a><a href="https://bowphp.github.io/api/master">API Reference</a></div><div><h5>Communité</h5><a href="http://ayiyikoh.org/" target="_blank" rel="noreferrer noopener">@ayiyikoh</a><a href="https://codedivoire.slack.com/">@Codedivoire</a></div><div><h5>En plus</h5><a href="https://twitter.com/@bowFramework" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://bowphp.slack.com/">Slack</a><a href="/blog">Blog</a><a href="https://github.com/bowphp">GitHub</a></div></section><section class="copyright">Copyright © 2019 Franck DAKIA</section></footer></div><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script></body></html>